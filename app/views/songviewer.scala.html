@(id: Long)

@admin("Song Editor"){
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/jquery.transposer.css")">

    <div id="song_viewer_wrapper">
        <div class="col-lg-12" id="song_viewer">
            <h3 id="songName"></h3>
            <p id="songOriginalTitle"></p>
            <p id="songAuthor"></p>
            <p id="songLink"></p>
            <pre id="songLyrics_0_songLyrics" class="songLyrics"></pre>
            <pre id="songLyrics_1_songLyrics" class="songLyrics" style="display:none;"></pre>
            <pre id="songLyrics_2_songLyrics" class="songLyrics" style="display:none;"></pre>
            <pre id="songLyrics_3_songLyrics" class="songLyrics" style="display:none;"></pre>
        </div>
    </div>

    <script src="@routes.Assets.at("javascripts/jquery-2.1.3.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/jquery.transposer.js")" type="text/javascript"></script>

    <script type="text/javascript" src="@routes.Application.javascriptRoutes()"></script>

    <script type="text/javascript">

    var id = @id;
    function songView(id) {
        jsRoutes.controllers.Application.getsongjson ( id ).ajax ( {
        datatype : 'json',
        success : function ( data ) {
            var songLyricsIDs = [];
            $ ( '#songName' ).html ( data.songName ) ;
            $ ( '#songOriginalTitle' ).html ( data.songOriginalTitle ) ;
            $ ( '#songAuthor' ).html ( data.songAuthor ) ;
            $ ( '#songLink' ).html ( data.songLink ) ;
            songLyricsIDs = data.songLyricsIDs ;

            $.each ( songLyricsIDs, function ( i, s ) {
                jsRoutes.controllers.Application.getsonglyricsjson (s).ajax ( {
                success : function (data) {
                    var songLyricsTag = '#songLyrics_' + i + '_songLyrics' ;
                    console.log(songLyricsTag);
                    $ ( songLyricsTag ).html ( data.songLyrics ) ;
                    $ ( songLyricsTag ).attr ( "style", "display:block;" ) ;
                    $ ( function ( ) {
                        $ ( songLyricsTag ).transpose ( { key : 'C' } );
                    });
                },
                error : function ( ) {
                    console.log ( "Error: ajax failure" )
                }
                } )
            } ) ;
        },
        error : function ( ) {
        console.log ( "Error: ajax failure" ) ;
        }
        })
        $('#dynamiccontent').html($('#song_viewer_wrapper' ).html());
        $('#songEditor' ).remove();
    }
    window.onload = songView(id);
    </script>
}
