@admin("") {
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/dataTables.responsive.css")">
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/jquery.transposer.css")">

    <div id="song_table_wrapper">
        <div class="col-lg-12"  id="song_table_header">
            <h2>Song database</h2>
        </div>
        <div class="col-lg-6"  id="song_table_div">
            <table id="song_table" class="table table-striped table-hover dt-responsive" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Link</th>
                        <th>Id</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Row 1 Data 1</td>
                        <td>Row 1 Data 2</td>
                        <td>Row 1 Data 3</td>
                        <td>Row 1 Data 4</td>
                        <td>Row 1 Data 5</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-lg-6" id="song_section_div">
            <div class="row">
            <button id="editsongbutton" class="songbuttons"><i class="glyphicon glyphicon-edit"></i>Edit song</button>
            <button id="addsongbutton" class="songbuttons"><i class="glyphicon glyphicon-plus"></i>Add new song</button>
            <button id="deletesongbutton" class="songbuttons"><i class="glyphicon glyphicon-minus"></i>Delete song</button>

                <div class="alert alert-block alert-error fade in" id="cert-error" style="display:none;">
                    <button type="button" class="close" data-dismiss="alert">Ã—</button>
                    <h4 class="alert-heading">Delete success</h4>
                </div>

            </div>
            <div class="row">
            <pre id="songLyrics"></pre>
            </div>
        </div>

    </div>

    <script src="@routes.Assets.at("javascripts/jquery-2.1.3.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/jquery.dataTables.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/dataTables.responsive.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/jquery.transposer.js")" type="text/javascript"></script>

    <script type="text/javascript">

    /* Table initialisation */
    $ ( document ).ready ( function ( ) {
    var selectedId;
    // copy song table div to dynamic content div
    $('#dynamiccontent').html($('#song_table_wrapper' ).html());
    // delete initial table div
    $('#song_table_wrapper' ).remove();

    $ ( '#song_table' ).dataTable ( {
    responsive : true,
    "bProcessing" : true,
    "aaSorting" :[[ 0, "asc" ] ],
    "bServerSide" : true,
    "bJQueryUI" : true,
    "sPaginationType" : "full",
    "sAjaxSource" : " @routes.Application.getsongsdatatable()",
    "dom": 'T<"clear">lfrtip',
    "columns": [
    { "data": "songName" },
    { "data": "songOriginalTitle" },
    { "data": "songAuthor" },
    { "data": "songLink" },
    { "data": "songId" }
    ],
    "tableTools": {
    "sRowSelect": "single"
    },
    "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
    var sLinks = '<a class="lyrics_link" id=' + aData.songLyricsIDs[0] + '>' + aData.songName + '</a>';
    var songIdCount = Object.keys(aData.songLyricsIDs).length;
    if (songIdCount > 1){
        var sLinks = sLinks.concat(' | '+ '<a class="lyrics_link" id=' + aData.songLyricsIDs[1] + '>'+ 2 + '</a>');
    }
    $('td:eq(0)', nRow).html(sLinks);
    $(nRow).attr('id', aData.songId);
    return nRow;
    }
    } );
    var table = $('#song_table').DataTable();


    var table = $('#song_table').DataTable();

    //for static row selection
    $('#song_table tbody').on( 'click', 'tr', function () {
        selectedId =  $(this ).attr('id');
        table.$('tr.selected').removeClass('selected');
        $(this).addClass('selected');
        updateLyrics(selectedId);
    } );

    // for dynamic links in dt cells
    $('#song_table tbody').click(function(event) {
        if ("lyrics_link" == event.target.attributes.class.value){
            var lyricsid = event.target.attributes.id.value;
            if (lyricsid != null){
                if (lyricsid != selectedId){
                    updateLyrics(lyricsid);
                    selectedId = lyricsid;
                }
            }
        }
    });

    $('.songbuttons').click(function(event) {
        if ( "editsongbutton" == event.target.attributes.id.value ) {
            songActions ( 1 ) ;
        } else if ( "addsongbutton" == event.target.attributes.id.value ) {
            songActions ( 2 ) ;
        } else if ( "deletesongbutton" == event.target.attributes.id.value ) {
            songActions ( 3 ) ;}
    });

    function songActions(action) {
        switch ( action ) {
            // edit song
            case 1 :
            jsRoutes.controllers.Application.songeditor ( selectedId ).ajax ( {
            success : function ( data ) {
            $ ( '#dynamiccontent' ).html ( data ) ;
            },
            error : function ( ) {
            console.log ( "Error: ajax failure" )
            }
            } )
            break ;

            //add new song
            case 2 :
            jsRoutes.controllers.Application.newsongeditor ( selectedId ).ajax ( {
            success : function ( data ) {
            $ ( '#dynamiccontent' ).html ( data ) ;
            },
            error : function ( ) {
            console.log ( "Error: ajax failure" )
            }
            } )
            break ;

            //delete song
            case 3 :
            jsRoutes.controllers.Application.deletesong ( selectedId ).ajax ( {
            type : "POST",
            success : function ( data ) {
            showAlert ( ) ;
            $ ( '#song_table' ).DataTable ( ).ajax.reload ( ) ;
            },
            error : function ( ) {
            console.log ( "Error: ajax failure" )
            }
            } )
            break ;
        }
    }

    function updateLyrics (lyricsid) {
        jsRoutes.controllers.Application.getsonglyricsjson ( lyricsid ).ajax ( {
        success : function ( data ) {
            $('.transpose-keys').remove();
            $ ( '#songLyrics' ).html ( data.songLyrics );
            $ ( function ( ) {
            $ ( "#songLyrics" ).transpose ( { key : 'C' } );
            if ($(window).width()<1024) {
            $ ( '#songLyrics' )[ 0 ].scrollIntoView ( true ) ;
            }
            } ) ;
        },
        error : function ( ) {
            console.log ( "Error: ajax failure" ) ;
        }
        } )
    }

    });

    $('.alert .close').live("click", function(e) {
    $(this).parent().hide();
    });

    function showAlert() {
    $(".alert").addClass("in");
    $("#cert-error").show();
    }

    function closeAlert() {
    $("#cert-error").hide();
    }

    </script>
}