@(songs: List[Song], songForm: Form[Song])

@import helper._

@main("Song list") {

    <div class="container">
        <div class="row">
            <div class="navbar navbar-inverse" role="navigation">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" rel="home" href="<?= base_url();?>" title="Buy Sell Rent Everyting">
                        Classified</a>
                </div>
                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <div class="col-sm-6 col-md-6">
                        <form class="navbar-form" role="search" method="get" id="search-form" name="search-form">
                            <div class="btn-group pull-left" style="margin-right : 10 px ;">
                                <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
                                    Mumbai <span class="caret"></span></a>
                                <div class="dropdown-menu multi">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <ul class="dropdown-menu"><li><a href="#"><strong>
                                                    Mumbai</strong></a></li></ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="2 BHK Flat, Pune Real Estate, Pest Control..." id="query" name="query" value="">
                                <div class="input-group-btn">
                                    <button type="submit" class="btn btn-success"><span class="glyphicon glyphicon-search"></span></button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <form class="navbar-form navbar-right" role="search">
                            <div class="input-group"><a href="#" class="btn btn-warning">Post Your Ads</a></div>
                        </form>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a data-toggle="modal" href="#" data-target="#">Login</a></li>
                        <li><a data-toggle="modal" href="#" data-target="#">Register</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="scrollable-dropdown-menu">
        <input class="typeahead" type="text" placeholder="Countries">
    </div>


    <script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.min.js"></script>
    <script type="text/javascript">
    var songNames =[ ] ;
        @for(song <- songs) {
            songNames.push ( " @song.songName ");
        }

    var substringMatcher = function ( strs ) {
    return function findMatches ( q, cb ) {
    var matches, substrRegex ;

    // an array that will be populated with substring matches
    matches =[ ] ;

    // regex used to determine if a string contains the substring `q`
    substrRegex = new RegExp ( q, 'i' ) ;

    // iterate through the pool of strings and for any string that
    // contains the substring `q`, add it to the `matches` array
    $.each ( strs, function ( i, str ) {
    if ( substrRegex.test ( str ) ) {
    // the typeahead jQuery plugin expects suggestions to a
    // JavaScript object, refer to typeahead docs for more info
    matches.push ( { value : str } ) ;
    }
    } ) ;

    cb ( matches ) ;
    } ;
    } ;


    $ ( '#scrollable-dropdown-menu .typeahead' ).typeahead ( null, {
    name : 'countries',
    displayKey : 'name',
    source : substringMatcher ( songNames )
    } ) ;
    </script>

    <div class="container">
        <div class="jumbotron">
            <h1>@songs.size() songs(s)</h1>
            <ul>
            @for(song <- songs) {
                <li>
                    @song.songName

                    @form(routes.Application.getSong(song.id)) {
                        <input type="submit" value="Show">
                    }
                    @form(routes.Application.deleteSong(song.id)) {
                        <input type="submit" value="Delete">
                        }
                </li>
            }
            </ul>

            <h2>Add a new song</h2>
            @helper.form(action = routes.Application.newSong()) {
                @helper.inputText(songForm("songName"))
                @helper.inputText(songForm("songAuthor"))
                @helper.textarea(field = songForm("songLyrics"), args = 'rows -> 20, 'cols -> 40)
                <input type="submit" value="Create">
                }
        </div>
}